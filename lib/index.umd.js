!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.movable=t()}(this,function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.$=function(e){return"string"==typeof e?document.querySelector(e):e}});e(n);n.$;var o=t(function(e,t){function n(e,t,n){const o="zIndex"===t?n:"number"==typeof n?`${n}px`:n;if(e.style[t]===o)return!1;e.style[t]=o}Object.defineProperty(t,"__esModule",{value:!0}),t.setStyle=n,t.setStyles=function(e,t){Object.keys(t).forEach(o=>{n(e,o,t[o])})}});e(o);o.setStyle,o.setStyles;var a=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});let n=!1;try{const e=Object.defineProperty({},"passive",{get(){n=!0}});window.addEventListener("test",null,e)}catch(e){}function o(){return n}t.isSupportPassive=o,t.default=o});e(a);a.isSupportPassive;var i=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n=()=>null,o=!!a.default()&&{passive:!0,capture:!1};function i(e,t,n){"tap"!==t?e.addEventListener(t,n,o):s(e,n)}function r(e,t,n){e.removeEventListener(t,n,o)}function s(e,t){let n=null,o=!1;i(e,"touchstart",()=>{n=Date.now()}),i(e,"touchmove",()=>{o=!0}),i(e,"touchend",function(e){if(o)return o=!1,!1;Date.now()-n<300&&t.call(this,e),n=Date.now()})}t.addEvent=i,t.removeEvent=r,t.addEvents=function(e,t=[],o=n){t.forEach(t=>i(e,t,o))},t.removeEvents=function(e,t=[],o=n){t.forEach(t=>r(e,t,o))},t.onTap=s});e(i);i.addEvent,i.removeEvent,i.addEvents,i.removeEvents,i.onTap;var r=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n=["touchstart","touchmove","touchend","touchcancel"];t.getClientXY=function(e){if(-1===n.indexOf(e.type))return{clientX:e.clientX,clientY:e.clientY};const t=e.targetTouches[0]||e.touches[0];return{clientX:t.clientX,clientY:t.clientY}}});e(r);r.getClientXY;var s=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.$=n.$,t.setStyle=o.setStyle,t.setStyles=o.setStyles,t.addEvent=i.addEvent,t.addEvents=i.addEvents,t.removeEvent=i.removeEvent,t.removeEvents=i.removeEvents,t.onTap=i.onTap,t.getClientXY=r.getClientXY});e(s);var u=s.$,l=(s.setStyle,s.setStyles),d=(s.addEvent,s.addEvents),c=(s.removeEvent,s.removeEvents,s.onTap,s.getClientXY);function v(e,t){if(!e)throw new Error(t)}var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m.call(this);var n=t.boundable,o=void 0!==n&&n,a=t.fixed,i=void 0!==a&&a,r=t.handler||".handler",s=t.container;this.$handler=u(r),this.$container=s&&u(s)||this.$handler,v(this.$handler,r+" element should be mounted first."),v(this.$container,s+" element should be mounted first.");var l=this.$container.getBoundingClientRect(),d=l.x,c=l.y,f=l.width,h=l.height;this.state={fixed:i,boundable:o,movable:!1,boundaried:!1,originX:d,originY:c,width:f,height:h,innerWidth:window.innerWidth,innerHeight:window.innerHeight,currentX:0,currentY:0,deltaX:0,deltaY:0,mouseDeltaX:0,mouseDeltaY:0},this.on()}return f(e,[{key:"styledMembers",value:function(){l(this.$handler,{cursor:"move",userSelect:"none"})}},{key:"on",value:function(){this.styledMembers(),d(window,["resize"],this.onResize),d(this.$handler,["mousedown","touchstart"],this.onMouseDown),d(document,["mouseup","touchend","touchcancel"],this.onMouseUp),d(document,["mousemove","touchmove"],this.onMouseMove)}}]),e}();h.version="1.0.0";var m=function(){var e=this;this.onResize=function(){var t=e.$container.getBoundingClientRect(),n=t.x,o=t.y,a=t.width,i=t.height;e.state.innerWidth=window.innerWidth,e.state.innerHeight=window.innerHeight,e.state.originX=n-e.state.deltaX,e.state.originY=o-e.state.deltaY,e.state.width=a,e.state.height=i,e.state.mouseDeltaX=0,e.state.mouseDeltaY=0},this.onMouseDown=function(t){var n=c(t),o=n.clientX,a=n.clientY;e.state.currentX=o,e.state.currentY=a,e.state.movable=!0},this.onMouseUp=function(){e.state.movable&&(e.state.movable=!1,e.state.deltaX+=e.state.mouseDeltaX,e.state.deltaY+=e.state.mouseDeltaY,e.state.mouseDeltaX=0,e.state.mouseDeltaY=0)},this.onMouseMove=function(t){if(!e.state.movable)return!1;var n=c(t),o=n.clientX,a=n.clientY,i=o-e.state.currentX,r=a-e.state.currentY;e.state.mouseDeltaX=i,e.state.mouseDeltaY=r;var s=e.state.deltaX+i,u=e.state.deltaY+r;if(e.state.boundable){var d=e.state,v=d.originX,f=d.originY,h=d.width,m=d.height,p=d.innerWidth,y=d.innerHeight;v+s<0?(s=-v,e.boundaried=!0,e.state.mouseDeltaX=-v-e.state.deltaX):p<v+h+s&&(s=p-(v+h),e.boundaried=!0,e.state.mouseDeltaX=p-v-h-e.state.deltaX),f+u<0?(u=-f,e.boundaried=!0,e.state.mouseDeltaY=-f-e.state.deltaY):y<f+m+u&&(u=y-(f+m),e.boundaried=!0,e.state.mouseDeltaY=y-f-m-e.state.deltaY)}l(e.$container,{"-webkit-transform":"translate3d("+s+"px, "+u+"px, 0px)","-moz-transform":"translate3d("+s+"px, "+u+"px, 0px)","-o-transform":"translate3d("+s+"px, "+u+"px, 0px)",transform:"translate3d("+s+"px, "+u+"px, 0px)"})}};return h});
